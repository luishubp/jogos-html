<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FNAF Ultimate Mobile</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root { --p: #88ff88; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            background: #000; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            overflow: hidden; 
            font-family: 'VT323', monospace;
        }

        /* ÁREA DO JOGO - Travada para não esticar */
        #game-view {
            position: relative;
            width: 100vw;
            height: 56.25vw; /* Mantém 16:9 */
            max-width: 1100px;
            max-height: 620px;
            background: #0a0a0a;
            border: 2px solid #222;
            overflow: hidden;
        }

        /* --- OFFICE --- */
        .door-v { position: absolute; top: -100%; width: 15%; height: 100%; background: #222; border: 4px solid #000; z-index: 10; transition: 0.3s; }
        .door-L { left: 0; } .door-R { right: 0; }
        .door-closed { top: 0 !important; }

        /* PAINÉIS LATERAIS - Agora fixos nas pontas */
        .panel { position: absolute; top: 25%; display: flex; flex-direction: column; gap: 15px; z-index: 20; padding: 10px; background: rgba(0,0,0,0.5); border-radius: 5px; }
        .p-L { left: 16%; } .p-R { right: 16%; }

        .btn { width: 55px; height: 55px; border: 3px solid #000; color: #fff; cursor: pointer; font-family: 'VT323'; border-radius: 4px; }
        .btn-d { background: #600; } .btn-l { background: #660; }
        .btn-active-d { background: #f00 !important; box-shadow: 0 0 10px #f00; }
        .btn-active-l { background: #ff0 !important; color: #000; }

        /* --- MONITOR --- */
        #tablet { position: absolute; inset: 0; background: #050505; display: none; z-index: 100; }
        .cam-display { width: 100%; height: 100%; position: relative; border: 10px solid #111; }
        .noise { position: absolute; inset: 0; background: url('https://media.giphy.com/media/oEI9uWUicKgR6/giphy.gif'); opacity: 0.08; pointer-events: none; }

        /* DESIGN DO MAPA (IGUAL À FOTO) */
        #map {
            position: absolute; bottom: 20px; right: 20px;
            width: 260px; height: 200px;
            background: rgba(0,0,0,0.7);
            border: 2px solid var(--p);
            padding: 5px;
        }
        .cam-node {
            position: absolute;
            width: 45px; height: 35px;
            background: #020; border: 1px solid var(--p);
            color: var(--p); font-size: 12px; cursor: pointer;
        }
        .cam-node.active { background: var(--p); color: #000; }

        /* Posições baseadas no layout oficial */
        .c1a { top: 5%; left: 40%; }
        .c1b { top: 25%; left: 35%; }
        .c1c { top: 45%; left: 5%; }
        .c5 { top: 15%; left: 5%; }
        .c3 { top: 75%; left: 5%; }
        .c2a { top: 80%; left: 35%; }
        .c2b { top: 90%; left: 35%; }
        .c4a { top: 80%; left: 60%; }
        .c4b { top: 90%; left: 60%; }
        .c6 { top: 70%; left: 85%; }
        .c7 { top: 30%; left: 85%; }

        /* UI */
        .ui { position: absolute; color: var(--p); z-index: 150; font-size: 20px; text-shadow: 2px 2px #000; }
        #mon-btn { 
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
            width: 40%; height: 35px; background: rgba(255,255,255,0.1);
            border: 1px solid #fff; color: #fff; cursor: pointer; z-index: 200;
        }
    </style>
</head>
<body>

<div id="game-view">
    <div class="ui" style="top:5px; left:10px;">ENERGIA: <span id="pwr">100</span>%</div>
    <div class="ui" style="top:5px; right:10px;"><span id="time">12</span> AM</div>

    <div id="office">
        <div id="dv-L" class="door-v door-L"></div>
        <div id="dv-R" class="door-v door-R"></div>
        
        <div class="panel p-L">
            <button class="btn btn-d" id="db-L" onclick="game.toggleD('L')">DOOR</button>
            <button class="btn btn-l" ontouchstart="game.setL('L',true)" ontouchend="game.setL('L',false)">LIGHT</button>
        </div>

        <div class="panel p-R">
            <button class="btn btn-d" id="db-R" onclick="game.toggleD('R')">DOOR</button>
            <button class="btn btn-l" ontouchstart="game.setL('R',true)" ontouchend="game.setL('R',false)">LIGHT</button>
        </div>

        <div id="monster-door" style="position:absolute; bottom:20%; width:70px; height:120px; display:none; filter:blur(10px);"></div>
    </div>

    <button id="mon-btn" onclick="game.toggleM()">MONITOR</button>

    <div id="tablet">
        <div class="cam-display">
            <div class="noise"></div>
            <div class="ui" id="cam-name" style="top:10px; left:10px;">CAM 1A - PALCO</div>
            <div id="m-dot" style="position:absolute; width:60px; height:60px; border-radius:50%; filter:blur(15px); display:none;"></div>
            
            <div id="map">
                <button class="cam-node c1a" onclick="game.setCam('1A','PALCO')">1A</button>
                <button class="cam-node c1b" onclick="game.setCam('1B','ÁREA JANTAR')">1B</button>
                <button class="cam-node c1c" onclick="game.setCam('1C','COVA PIRATA')">1C</button>
                <button class="cam-node c5" onclick="game.setCam('5','BASTIDORES')">5</button>
                <button class="cam-node c3" onclick="game.setCam('3','SUPRIMENTOS')">3</button>
                <button class="cam-node c2a" onclick="game.setCam('2A','CORREDOR E')">2A</button>
                <button class="cam-node c2b" onclick="game.setCam('2B','CANTO E')">2B</button>
                <button class="cam-node c4a" onclick="game.setCam('4A','CORREDOR D')">4A</button>
                <button class="cam-node c4b" onclick="game.setCam('4B','CANTO D')">4B</button>
                <button class="cam-node c6" onclick="game.setCam('6','COZINHA')">6</button>
                <button class="cam-node c7" onclick="game.setCam('7','BANHEIROS')">7</button>
                <div style="position:absolute; bottom:5px; left:45%; color:white; font-size:10px;">YOU</div>
            </div>
        </div>
    </div>
</div>

<script>
class FNAF {
    constructor() {
        this.pwr = 100; this.hr = 0; this.open = false; this.cur = '1A';
        this.doors = {L:false, R:false};
        this.monsters = {
            'Freddy': {pos:'1A', color:'#4d2600', path:['1A','1B','7','4A','4B','DoorR']},
            'Bonnie': {pos:'1A', color:'#4b0082', path:['1A','5','3','2A','2B','DoorL']},
            'Chica':  {pos:'1A', color:'#ffd700', path:['1A','1B','6','4A','4B','DoorR']},
            'Foxy':   {pos:'1C', color:'#b22222', path:['1C','2A','DoorL']}
        };
        this.loop();
    }

    loop() {
        setInterval(() => {
            let u = 0.1;
            if(this.doors.L) u+=0.4; if(this.doors.R) u+=0.4; if(this.open) u+=0.3;
            this.pwr -= u;
            document.getElementById('pwr').innerText = Math.max(0, Math.floor(this.pwr));
            if(this.pwr <= 0) location.reload();
        }, 1000);
        setInterval(() => this.move(), 4500);
    }

    toggleD(s) {
        this.doors[s] = !this.doors[s];
        document.getElementById('dv-'+s).classList.toggle('door-closed', this.doors[s]);
        document.getElementById('db-'+s).classList.toggle('btn-active-d', this.doors[s]);
    }

    setL(s, on) {
        const mon = document.getElementById('monster-door');
        mon.style.display = 'none';
        if(on) {
            for(let n in this.monsters) {
                if(this.monsters[n].pos === 'Door'+s) {
                    mon.style.display = 'block';
                    mon.style.background = this.monsters[n].color;
                    mon.style.left = s === 'L' ? '2%' : '88%';
                }
            }
        }
    }

    toggleM() {
        this.open = !this.open;
        document.getElementById('tablet').style.display = this.open ? 'block' : 'none';
        if(this.open) this.setCam(this.cur, "ATUAL");
    }

    setCam(id, name) {
        this.cur = id;
        document.getElementById('cam-name').innerText = `CAM ${id} - ${name}`;
        const dot = document.getElementById('m-dot');
        dot.style.display = 'none';
        for(let n in this.monsters) {
            if(this.monsters[n].pos === id) {
                dot.style.display = 'block';
                dot.style.background = this.monsters[n].color;
            }
        }
    }

    move() {
        for(let n in this.monsters) {
            let m = this.monsters[n];
            if(Math.random() > 0.7) {
                let idx = m.path.indexOf(m.pos);
                if(m.pos.startsWith('Door')) {
                    if(!this.doors[m.pos.endsWith('L')?'L':'R']) {
                        alert("MORREU PARA " + n.toUpperCase());
                        location.reload();
                    } else m.pos = '1A';
                } else if(idx < m.path.length-1) {
                    m.pos = m.path[idx+1];
                }
            }
        }
        if(this.open) this.setCam(this.cur, "...");
    }
}
const game = new FNAF();
</script>
</body>
</html>

