<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>FNAF: Fix Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; background: #000; color: #fff; font-family: 'VT323', monospace; height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        #screen-container { position: relative; width: 1000px; height: 600px; background: #0a0a0a; border: 10px solid #333; overflow: hidden; }

        /* MENU */
        #game-menu, #custom-night-panel { position: absolute; inset: 0; background: #000; z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .menu-title { font-size: 60px; color: #f00; margin-bottom: 20px; }
        .m-btn { background: none; border: 2px solid #fff; color: #fff; font-family: 'VT323'; font-size: 30px; cursor: pointer; margin: 10px; padding: 10px 20px; }
        .cn-setup { display: flex; gap: 15px; margin-bottom: 30px; }
        .ai-card { background: #111; border: 1px solid #fff; padding: 10px; width: 100px; text-align: center; }

        /* ESCRIT√ìRIO */
        #office { position: absolute; inset: 0; background: #1a1a1a; display: flex; justify-content: space-between; align-items: center; }
        .door { position: absolute; top: 0; width: 120px; height: 100%; background: #222; z-index: 50; transition: 0.2s; border: 4px solid #111; }
        #door-L { left: 0; transform: translateY(-100%); }
        #door-R { right: 0; transform: translateY(-100%); }
        .closed { transform: translateY(0) !important; }
        .light-effect { position: absolute; top: 0; width: 300px; height: 100%; opacity: 0; z-index: 40; pointer-events: none; }
        #light-L { left: 0; background: linear-gradient(to right, rgba(255,255,255,0.2), transparent); }
        #light-R { right: 0; background: linear-gradient(to left, rgba(255,255,255,0.2), transparent); }
        .side-panel { position: absolute; top: 35%; z-index: 100; display: flex; flex-direction: column; gap: 10px; background: #222; padding: 5px; }
        .btn { width: 60px; height: 40px; cursor: pointer; background: #000; color: #fff; border: 1px solid #fff; font-family: 'VT323'; }

        /* MONITOR */
        #camera-monitor { position: absolute; inset: 0; background: #000; z-index: 500; display: none; }
        #cam-view { width: 100%; height: 100%; position: relative; display: flex; align-items: center; justify-content: center; }
        #anim-render { font-size: 150px; text-shadow: 0 0 20px #000; }
        #map { position: absolute; bottom: 20px; right: 20px; width: 220px; height: 200px; background: rgba(0,0,0,0.9); border: 2px solid #fff; }
        .cam-btn { position: absolute; width: 35px; height: 25px; background: #333; color: #fff; font-size: 10px; cursor: pointer; border: 1px solid #fff; }
        .cam-btn.active { background: #f00; }

        /* UI */
        #ui-pwr { position: absolute; bottom: 20px; left: 20px; z-index: 1000; font-size: 24px; }
        #ui-time { position: absolute; top: 20px; right: 20px; z-index: 1000; font-size: 35px; }
        #mon-trigger { position: absolute; bottom: 0; left: 30%; width: 40%; height: 40px; background: rgba(255,255,255,0.1); border-top: 2px solid #fff; z-index: 1100; cursor: pointer; text-align: center; line-height: 40px; }
        .office-char { position: absolute; bottom: 20px; font-size: 120px; z-index: 45; display: none; filter: brightness(0.2); }
        #jumpscare { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; align-items: center; justify-content: center; font-size: 300px; animation: shake 0.1s infinite; }
        @keyframes shake { 0% {transform: translate(5px,5px)} 50% {transform: translate(-5px,-5px)} }
    </style>
</head>
<body>

<div id="screen-container">
    <div id="game-menu">
        <h1 class="menu-title">FNAF: FIXED</h1>
        <button class="m-btn" onclick="game.start(false)">NEW GAME</button>
        <button class="m-btn" onclick="document.getElementById('custom-night-panel').style.display='flex'">CUSTOM NIGHT</button>
    </div>

    <div id="custom-night-panel" style="display:none">
        <h1 class="menu-title">CUSTOM NIGHT</h1>
        <div class="cn-setup">
            <div class="ai-card">üêª<br><span id="v-freddy">0</span><br><button onclick="game.adj('freddy', 1)">+</button><button onclick="game.adj('freddy', -1)">-</button></div>
            <div class="ai-card">üê∞<br><span id="v-bonnie">0</span><br><button onclick="game.adj('bonnie', 1)">+</button><button onclick="game.adj('bonnie', -1)">-</button></div>
            <div class="ai-card">üê•<br><span id="v-chica">0</span><br><button onclick="game.adj('chica', 1)">+</button><button onclick="game.adj('chica', -1)">-</button></div>
            <div class="ai-card">ü¶ä<br><span id="v-foxy">0</span><br><button onclick="game.adj('foxy', 1)">+</button><button onclick="game.adj('foxy', -1)">-</button></div>
        </div>
        <button class="m-btn" onclick="game.start(true)">START</button>
    </div>

    <div id="office">
        <div id="char-L" class="office-char" style="left:20px">üê∞</div>
        <div id="char-R" class="office-char" style="right:20px">üê•</div>
        <div id="door-L" class="door"></div>
        <div id="light-L" class="light-effect"></div>
        <div class="side-panel" style="left: 130px;"><button class="btn" onclick="game.toggleDoor('L')">DOOR</button><button class="btn" onclick="game.toggleLight('L')">LIGHT</button></div>
        <div id="door-R" class="door"></div>
        <div id="light-R" class="light-effect"></div>
        <div class="side-panel" style="right: 130px;"><button class="btn" onclick="game.toggleDoor('R')">DOOR</button><button class="btn" onclick="game.toggleLight('R')">LIGHT</button></div>
    </div>

    <div id="camera-monitor">
        <div id="cam-view">
            <div id="anim-render"></div>
            <div id="map">
                <button class="cam-btn active" style="top:10px;left:40%" onclick="game.setCam('1A',this)">1A</button>
                <button class="cam-btn" style="top:40px;left:35%" onclick="game.setCam('1B',this)">1B</button>
                <button class="cam-btn" style="top:90px;left:5%" onclick="game.setCam('1C',this)">1C</button>
                <button class="cam-btn" style="top:40px;left:5%" onclick="game.setCam('5',this)">5</button>
                <button class="cam-btn" style="bottom:70px;left:25%" onclick="game.setCam('2A',this)">2A</button>
                <button class="cam-btn" style="bottom:20px;left:25%" onclick="game.setCam('2B',this)">2B</button>
            </div>
        </div>
    </div>

    <div id="ui-pwr">POWER: <span id="pwr-val">100</span>%</div>
    <div id="ui-time"><span id="hour-val">12</span> AM</div>
    <div id="mon-trigger" onclick="game.toggleMon()">MONITOR</div>
</div>
<div id="jumpscare">üêª</div>

<script>
class FNAF {
    constructor() {
        this.pwr = 100; this.mon = false; this.cam = '1A'; this.hour = 0;
        this.doors = {L:false, R:false}; this.lights = {L:false, R:false};
        this.ai = { freddy: 0, bonnie: 0, chica: 0, foxy: 0 };
        this.pos = { bonnie: '1A', chica: '1A', freddy: '1A' };
        this.foxyStage = 0;
    }
    adj(c,v) { this.ai[c] = Math.max(0, Math.min(20, this.ai[c]+v)); document.getElementById('v-'+c).innerText = this.ai[c]; }
    start(custom) {
        document.getElementById('game-menu').style.display = 'none';
        document.getElementById('custom-night-panel').style.display = 'none';
        if(!custom) this.ai = { freddy: 1, bonnie: 3, chica: 2, foxy: 1 };
        setInterval(() => { this.hour++; if(this.hour>=6) {alert("6 AM"); location.reload();} document.getElementById('hour-val').innerText = this.hour; }, 45000);
        setInterval(() => { let u = 1+(this.doors.L?1:0)+(this.doors.R?1:0)+(this.mon?1:0); this.pwr -= (u*0.15); document.getElementById('pwr-val').innerText = Math.floor(this.pwr); if(this.pwr<=0) this.scare('üêª'); }, 1000);
        setInterval(() => this.moveAI(), 4000);
    }
    toggleDoor(s) { this.doors[s] = !this.doors[s]; document.getElementById('door-'+s).classList.toggle('closed'); }
    toggleLight(s) { this.lights[s] = !this.lights[s]; document.getElementById('light-'+s).style.opacity = this.lights[s]?1:0; this.updOff(); }
    toggleMon() { this.mon = !this.mon; document.getElementById('camera-monitor').style.display = this.mon?'block':'none'; this.updCam(); }
    setCam(id,b) { this.cam = id; document.querySelectorAll('.cam-btn').forEach(x=>x.classList.remove('active')); b.classList.add('active'); this.updCam(); }
    updCam() {
        let r = document.getElementById('anim-render'); r.innerText = "";
        if(this.cam === '1C') { r.innerText = (this.foxyStage > 2 ? 'ü¶ä' : 'üö©'); return; }
        for(let c in this.pos) { if(this.pos[c] === this.cam) r.innerText = (c==='freddy'?'üêª':c==='bonnie'?'üê∞':'üê•'); }
    }
    updOff() {
        document.getElementById('char-L').style.display = (this.lights.L && this.pos.bonnie === 'OFFICE') ? 'block' : 'none';
        let rAtk = (this.pos.chica === 'OFFICE' || this.pos.freddy === 'OFFICE');
        document.getElementById('char-R').style.display = (this.lights.R && rAtk) ? 'block' : 'none';
        if(rAtk) document.getElementById('char-R').innerText = (this.pos.chica === 'OFFICE' ? 'üê•' : 'üêª');
    }
    moveAI() {
        // FOXY
        if(this.cam !== '1C' && Math.random()*20 < this.ai.foxy) {
            this.foxyStage++;
            if(this.foxyStage > 4) { if(!this.doors.L) this.scare('ü¶ä'); else { this.foxyStage = 0; this.pwr -= 5; } }
        }
        // FREDDY TRAVA
        let fLock = (this.mon && this.cam === this.pos.freddy);
        for(let c in this.pos) {
            if(c === 'freddy' && fLock) continue;
            if(Math.random()*20 < this.ai[c]) {
                let p = this.pos[c];
                if(p === '1A') this.pos[c] = '1B';
                else if(p === '1B') this.pos[c] = (c==='bonnie'?'5':'2A');
                else if(p === '5' || p === '2A') this.pos[c] = (c==='bonnie'?'2B':'OFFICE');
                else if(p === '2B') this.pos[c] = 'OFFICE';
                else if(p === 'OFFICE') {
                    if(!this.doors[c==='bonnie'?'L':'R']) this.scare(c==='freddy'?'üêª':c==='bonnie'?'üê∞':'üê•');
                    else this.pos[c] = '1A';
                }
            }
        }
        if(this.mon) this.updCam(); this.updOff();
    }
    scare(c) { document.getElementById('jumpscare').innerText = c; document.getElementById('jumpscare').style.display = 'flex'; setTimeout(()=>location.reload(), 2000); }
}
const game = new FNAF();
</script>
</body>
                    </html>
