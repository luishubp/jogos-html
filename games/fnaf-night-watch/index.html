<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>FNAF Ultimate Remastered</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root { --p: #88ff88; --danger: #ff3333; }
        body { margin: 0; background: #000; color: #fff; font-family: 'VT323', monospace; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        
        #game-container { position: relative; width: 100vw; height: 56.25vw; max-width: 1280px; max-height: 720px; border: 2px solid #333; overflow: hidden; background: #050505; }

        /* --- OFFICE E LUZ CORRIGIDA --- */
        #office { width: 100%; height: 100%; position: relative; background: #111; transition: background 0.1s; }
        
        /* A luz agora é uma div que cobre a lateral com brilho real */
        .light-glow {
            position: absolute; top: 0; width: 40%; height: 100%; opacity: 0; 
            pointer-events: none; z-index: 35; transition: opacity 0.05s;
        }
        #light-L { left: 0; background: linear-gradient(to right, rgba(255,255,200,0.4), transparent); }
        #light-R { right: 0; background: linear-gradient(to left, rgba(255,255,200,0.4), transparent); }

        .door { position: absolute; top: -100%; width: 15%; height: 100%; background: #222; border: 4px solid #000; transition: top 0.2s; z-index: 40; box-shadow: inset 0 0 20px #000; }
        .door-L { left: 10%; } .door-R { right: 10%; }
        .door-closed { top: 0% !important; }

        /* --- MONITOR E MAPA --- */
        #tablet { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #000; display: none; z-index: 500; border: 5px solid #444; box-sizing: border-box; }
        #cam-render { width: 100%; height: 70%; background: #080808; position: relative; border-bottom: 2px solid #333; }
        
        /* Mapa baseado na imagem que você enviou */
        #map { 
            position: absolute; bottom: 10px; right: 10px; width: 280px; height: 200px; 
            background: rgba(0,0,0,0.9); border: 2px solid var(--p); 
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px; padding: 10px; 
        }
        .cam-btn { background: #010; color: var(--p); border: 1px solid var(--p); font-family: 'VT323'; font-size: 16px; cursor: pointer; padding: 5px; }
        .cam-btn.active { background: var(--p); color: #000; }

        /* --- BOTÕES LATERAIS --- */
        .side-ctrl { position: absolute; top: 30%; display: flex; flex-direction: column; gap: 15px; z-index: 100; }
        .btn { width: 60px; height: 60px; border-radius: 50%; border: 4px solid #000; color: #fff; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .btn-d { background: #600; } .btn-l { background: #660; }
        .btn-d.on { background: #f00; box-shadow: 0 0 15px #f00; }
        .btn-l.on { background: #ff0; color: #000; box-shadow: 0 0 15px #ff0; }

        #open-tablet { position: absolute; bottom: 0; left: 25%; width: 50%; height: 40px; background: rgba(255,255,255,0.1); border: 1px solid #fff; z-index: 1000; color: #fff; text-align: center; line-height: 40px; cursor: pointer; }
        .ui { position: absolute; color: var(--p); font-size: 24px; z-index: 1000; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="office">
        <div id="light-L" class="light-glow"></div>
        <div id="light-R" class="light-glow"></div>
        <div id="visual-L" class="door door-L"></div>
        <div id="visual-R" class="door door-R"></div>

        <div class="side-ctrl" style="left: 10px;">
            <div id="btn-L-d" class="btn btn-d" onclick="game.door('L')">DOOR</div>
            <div id="btn-L-l" class="btn btn-l" onmousedown="game.light('L',true)" onmouseup="game.light('L',false)" ontouchstart="game.light('L',true)" ontouchend="game.light('L',false)">LIT</div>
        </div>

        <div class="side-ctrl" style="right: 10px;">
            <div id="btn-R-d" class="btn btn-d" onclick="game.door('R')">DOOR</div>
            <div id="btn-R-l" class="btn btn-l" onmousedown="game.light('R',true)" onmouseup="game.light('R',false)" ontouchstart="game.light('R',true)" ontouchend="game.light('R',false)">LIT</div>
        </div>
        
        <h1 style="position:absolute; width:100%; text-align:center; top:40%; color:#151515; font-size:100px; pointer-events:none;">OFFICE</h1>
    </div>

    <div id="tablet">
        <div id="cam-render">
            <div id="cam-id" style="padding:20px; font-size:30px; color:var(--p);">CAM 1A</div>
            <div id="monst-view" style="position:absolute; width:80px; height:80px; border-radius:50%; filter:blur(15px); display:none;"></div>
        </div>
        <div id="map">
            <button class="cam-btn" onclick="game.cam('1A')">1A</button>
            <button class="cam-btn" onclick="game.cam('1B')">1B</button>
            <button class="cam-btn" onclick="game.cam('1C')">1C</button>
            <button class="cam-btn" onclick="game.cam('2A')">2A</button>
            <button class="cam-btn" onclick="game.cam('2B')">2B</button>
            <button class="cam-btn" onclick="game.cam('3')">3</button>
            <button class="cam-btn" onclick="game.cam('4A')">4A</button>
            <button class="cam-btn" onclick="game.cam('4B')">4B</button>
            <button class="cam-btn" onclick="game.cam('5')">5</button>
            <button class="cam-btn" onclick="game.cam('6')">6</button>
            <button class="cam-btn" onclick="game.cam('7')">7</button>
        </div>
    </div>

    <div class="ui" style="bottom:10px; left:10px;">POWER: <span id="p">100</span>%</div>
    <div class="ui" style="top:10px; right:10px; font-size:35px;"><span id="h">12</span> AM</div>
    <div id="open-tablet" onclick="game.toggleTab()">MONITOR</div>
</div>

<script>
class FNAFEngine {
    constructor() {
        this.pwr = 100; this.hr = 0; this.curCam = '1A'; this.isOpen = false;
        this.doors = {L:false, R:false};
        this.ai = {
            'Freddy': {p:'1A', c:'brown', path:['1A','1B','7','4A','4B','DoorR']},
            'Bonnie': {p:'1A', c:'purple', path:['1A','5','3','2A','2B','DoorL']},
            'Chica':  {p:'1A', c:'yellow', path:['1A','1B','7','6','4A','4B','DoorR']},
            'Foxy':   {p:'1C', c:'red',    path:['1C','1C','2A','DoorL']} // Foxy fica na 1C mais tempo
        };
        this.init();
    }

    init() {
        setInterval(() => this.loop(), 1000);
        setInterval(() => this.move(), 4000);
        setInterval(() => { this.hr++; if(this.hr>=6) alert("6 AM!"); document.getElementById('h').innerText = this.hr; }, 60000);
    }

    loop() {
        let use = 0.1;
        if(this.doors.L) use+=0.4; if(this.doors.R) use+=0.4; if(this.isOpen) use+=0.2;
        this.pwr -= use;
        document.getElementById('p').innerText = Math.max(0, Math.floor(this.pwr));
        if(this.pwr <= 0) location.reload();
    }

    door(s) {
        this.doors[s] = !this.doors[s];
        document.getElementById('visual-'+s).classList.toggle('door-closed', this.doors[s]);
        document.getElementById('btn-'+s+'-d').classList.toggle('on', this.doors[s]);
    }

    light(s, on) {
        document.getElementById('light-'+s).style.opacity = on ? 1 : 0;
        document.getElementById('btn-'+s+'-l').classList.toggle('on', on);
    }

    toggleTab() {
        this.isOpen = !this.isOpen;
        document.getElementById('tablet').style.display = this.isOpen ? 'block' : 'none';
        if(this.isOpen) this.cam(this.curCam);
    }

    cam(id) {
        this.curCam = id;
        document.getElementById('cam-id').innerText = "CAM " + id;
        this.updateView();
    }

    updateView() {
        const v = document.getElementById('monst-view');
        v.style.display = 'none';
        for(let n in this.ai) {
            if(this.ai[n].p === this.curCam) {
                v.style.display = 'block';
                v.style.background = this.ai[n].c;
                v.style.left = Math.random()*70+"%"; v.style.top = Math.random()*40+"%";
            }
        }
    }

    move() {
        for(let n in this.ai) {
            let m = this.ai[n];
            if(Math.random() > 0.65) {
                let i = m.path.indexOf(m.p);
                if(m.p.startsWith('Door')) {
                    let side = m.p.endsWith('L') ? 'L' : 'R';
                    if(!this.doors[side]) { alert("JUMPSCARE: " + n); location.reload(); }
                    else { m.p = '1A'; } // Volta ao início se bloqueado
                } else if(i < m.path.length-1) {
                    m.p = m.path[i+1];
                }
            }
        }
        if(this.isOpen) this.updateView();
    }
}
const game = new FNAFEngine();
</script>
</body>
</html>

