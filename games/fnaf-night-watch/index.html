<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>FNAF Remastered - Custom Night</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root { --primary-color: #88ff88; --danger: #ff0000; }
        body { margin: 0; background: #000; color: #fff; font-family: 'VT323', monospace; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        
        #game-container { position: relative; width: 100vw; height: 56.25vw; max-width: 1280px; max-height: 720px; border: 2px solid #333; overflow: hidden; background: #050505; }

        /* --- MENUS --- */
        .screen { position: absolute; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 3000; background: #000; }
        .active-screen { display: flex; }
        h1 { font-size: 80px; margin: 0; color: var(--danger); text-shadow: 3px 3px #300; }
        .menu-btn { background: none; border: 1px solid #fff; color: #fff; padding: 10px 40px; font-family: 'VT323'; font-size: 30px; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        .menu-btn:hover { background: #fff; color: #000; }
        
        .cn-row { display: flex; gap: 40px; margin-bottom: 30px; }
        .cn-char { text-align: center; }
        .cn-char div { font-size: 60px; }
        .cn-input { width: 60px; background: #222; border: 1px solid var(--primary-color); color: var(--primary-color); font-family: 'VT323'; font-size: 30px; text-align: center; }

        /* --- OFFICE & LUZES --- */
        #office { width: 100%; height: 100%; position: relative; background: linear-gradient(to bottom, #111, #222, #111); }
        .physical-door { position: absolute; top: -100%; width: 12%; height: 100%; background: #333; border: 2px solid #111; transition: top 0.2s; z-index: 40; }
        .door-left { left: 8%; } .door-right { right: 8%; }
        .door-closed { top: 0% !important; }

        .office-light { position: absolute; width: 30%; height: 100%; opacity: 0; pointer-events: none; z-index: 30; }
        #light-L { left: 0; background: rgba(255, 255, 200, 0.2); }
        #light-R { right: 0; background: rgba(255, 255, 200, 0.2); }

        .anim-door { position: absolute; top: 35%; font-size: 100px; z-index: 25; display: none; }
        #bonnie-door { left: 5%; } #chica-door { right: 5%; }

        /* --- INTERFACE --- */
        .control-panel { position: absolute; top: 30%; width: 60px; height: 160px; background: #222; display: flex; flex-direction: column; align-items: center; justify-content: space-around; z-index: 100; }
        .btn { width: 45px; height: 45px; border-radius: 50%; cursor: pointer; border: 2px solid #000; user-select: none; text-align: center; line-height: 45px; }
        .btn-door.active { background: #f00; box-shadow: 0 0 10px #f00; }
        .btn-light.active { background: #ff0; color: #000; }

        #camera-tablet { position: absolute; inset: 0; background: #000; display: none; z-index: 500; padding: 20px; }
        #map-area { position: absolute; bottom: 20px; right: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .cam-btn { background: rgba(0,50,0,0.5); border: 1px solid var(--primary-color); color: #fff; cursor: pointer; padding: 10px; font-family: 'VT323'; }
        .cam-btn.active { background: var(--primary-color); color: #000; }

        .ui { position: absolute; z-index: 1000; padding: 15px; font-size: 30px; }
        .ui-pwr { bottom: 0; left: 0; color: var(--primary-color); }
        .ui-clk { top: 0; right: 0; }
        #mon-trig { position: absolute; bottom: 0; left: 30%; width: 40%; height: 40px; background: rgba(255,255,255,0.1); border: 1px solid #fff; z-index: 1000; cursor: pointer; text-align: center; line-height: 40px; }

        /* --- JUMPSCARE --- */
        #jumpscare { position: absolute; inset: 0; z-index: 5000; display: none; background: #000; flex-direction: column; justify-content: center; align-items: center; }
        .scare-text { font-size: 250px; }

        @keyframes glitch {
            0% { background: #f00; transform: scale(1.1); }
            50% { background: #000; transform: scale(0.9); }
            100% { background: #00f; transform: scale(1.2); }
        }
        .scare-active { animation: glitch 0.05s infinite; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="screen-menu" class="screen active-screen">
        <h1>FNAF REMASTERED</h1>
        <button class="menu-btn" onclick="showScreen('screen-cn')">CUSTOM NIGHT</button>
        <button class="menu-btn" onclick="startGame(1, 1)">START GAME (Easy)</button>
    </div>

    <div id="screen-cn" class="screen">
        <h1>CUSTOM NIGHT</h1>
        <div class="cn-row">
            <div class="cn-char"><div>üê∞</div><p>BONNIE</p><input type="number" id="lv-bonnie" class="cn-input" value="0" min="0" max="20"></div>
            <div class="cn-char"><div>üê•</div><p>CHICA</p><input type="number" id="lv-chica" class="cn-input" value="0" min="0" max="20"></div>
        </div>
        <button class="menu-btn" onclick="startCustomGame()">READY</button>
    </div>

    <div id="office" class="game-scene">
        <div id="v-door-L" class="physical-door door-left"></div>
        <div id="v-door-R" class="physical-door door-right"></div>
        <div id="bonnie-door" class="anim-door">üê∞</div>
        <div id="chica-door" class="anim-door">üê•</div>
        <div id="light-L" class="office-light"></div>
        <div id="light-R" class="office-light"></div>

        <div class="control-panel" style="left:0; border-radius: 0 5px 5px 0;">
            <div id="b-L-d" class="btn btn-door" onclick="game.toggleDoor('left')">D</div>
            <div id="b-L-l" class="btn btn-light" onmousedown="game.setLight('left',true)" onmouseup="game.setLight('left',false)">L</div>
        </div>
        <div class="control-panel" style="right:0; border-radius: 5px 0 0 5px;">
            <div id="b-R-d" class="btn btn-door" onclick="game.toggleDoor('right')">D</div>
            <div id="b-R-l" class="btn btn-light" onmousedown="game.setLight('right',true)" onmouseup="game.setLight('right',false)">L</div>
        </div>

        <div id="camera-tablet">
            <div id="cam-display" style="width:100%; height:70%; background:#080808; border:2px solid #333; position:relative; display:flex; justify-content:center; align-items:center;">
                <div id="enemy-sprite" style="width:80px; height:80px; border-radius:50%; filter:blur(15px); display:none;"></div>
                <div id="cam-lbl" style="position:absolute; top:20px; left:20px; font-size:40px; color:var(--primary-color);">CAM 1A</div>
            </div>
            <div id="map-area">
                <button id="b1A" class="cam-btn" onclick="game.switchCam('1A')">1A</button>
                <button id="b2A" class="cam-btn" onclick="game.switchCam('2A')">2A</button>
                <button id="b1B" class="cam-btn" onclick="game.switchCam('1B')">1B</button>
                <button id="b4B" class="cam-btn" onclick="game.switchCam('4B')">4B</button>
            </div>
        </div>

        <div class="ui ui-pwr">POWER: <span id="pwr">100</span>%</div>
        <div class="ui ui-clk" id="clk">12 AM</div>
        <div id="mon-trig" onclick="game.toggleMon()">MONITOR</div>
    </div>

    <div id="jumpscare">
        <div id="scare-icon" class="scare-text"></div>
        <h2 style="font-size:40px">YOU DIED</h2>
    </div>
</div>

<script>
function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
    document.getElementById(id).classList.add('active-screen');
}

function startCustomGame() {
    const bLv = parseInt(document.getElementById('lv-bonnie').value);
    const cLv = parseInt(document.getElementById('lv-chica').value);
    startGame(bLv, cLv);
}

function startGame(bLv, cLv) {
    showScreen('none');
    game.start(bLv, cLv);
}

class FNAFGame {
    constructor() {
        this.active = false;
        this.power = 100;
        this.hour = 0;
        this.doors = { left: false, right: false };
        this.currentCam = '1A';
        this.enemies = {
            'Bonnie': { pos: '1A', side: 'left', path: ['1A', '2A', 'DoorL'], char: 'üê∞', id: 'bonnie-door', color: 'purple' },
            'Chica': { pos: '1B', side: 'right', path: ['1B', '4B', 'DoorR'], char: 'üê•', id: 'chica-door', color: 'yellow' }
        };
    }

    start(bLv, cLv) {
        this.active = true;
        this.enemies['Bonnie'].lv = bLv;
        this.enemies['Chica'].lv = cLv;
        this.mainLoop = setInterval(() => this.tick(), 1000);
        this.aiLoop = setInterval(() => this.moveAI(), 4000);
        this.clockLoop = setInterval(() => this.updateClock(), 60000);
    }

    tick() {
        if(!this.active) return;
        let drain = 0.1;
        if(this.doors.left) drain += 0.4;
        if(this.doors.right) drain += 0.4;
        if(this.monitorOpen) drain += 0.3;
        this.power -= drain;
        document.getElementById('pwr').innerText = Math.floor(this.power);
        if(this.power <= 0) location.reload();
    }

    updateClock() {
        this.hour++;
        document.getElementById('clk').innerText = this.hour + " AM";
        if(this.hour >= 6) { alert("YOU WIN!"); location.reload(); }
    }

    toggleDoor(side) {
        this.doors[side] = !this.doors[side];
        document.getElementById(`v-door-${side==='left'?'L':'R'}`).classList.toggle('door-closed', this.doors[side]);
        document.getElementById(`b-${side==='left'?'L':'R'}-d`).classList.toggle('active', this.doors[side]);
    }

    setLight(side, state) {
        document.getElementById(`light-${side==='left'?'L':'R'}`).style.opacity = state ? 1 : 0;
        document.getElementById(`b-${side==='left'?'L':'R'}-l`).classList.toggle('active', state);
        
        const enemy = side === 'left' ? this.enemies['Bonnie'] : this.enemies['Chica'];
        const el = document.getElementById(enemy.id);
        if(enemy.pos === (side === 'left' ? 'DoorL' : 'DoorR')) {
            el.style.display = state ? 'block' : 'none';
        }
    }

    toggleMon() {
        this.monitorOpen = !this.monitorOpen;
        document.getElementById('camera-tablet').style.display = this.monitorOpen ? 'block' : 'none';
        if(this.monitorOpen) this.switchCam(this.currentCam);
    }

    switchCam(cam) {
        this.currentCam = cam;
        document.getElementById('cam-lbl').innerText = "CAM " + cam;
        const sprite = document.getElementById('enemy-sprite');
        sprite.style.display = 'none';
        for(let n in this.enemies) {
            if(this.enemies[n].pos === cam) {
                sprite.style.display = 'block';
                sprite.style.background = this.enemies[n].color;
            }
        }
    }

    moveAI() {
        for(let n in this.enemies) {
            let e = this.enemies[n];
            if(Math.random() * 20 < e.lv) {
                let idx = e.path.indexOf(e.pos);
                if(idx === e.path.length - 1) { // T√° na porta
                    if(!this.doors[e.side]) this.jumpscare(e.char);
                    else { e.pos = e.path[0]; document.getElementById(e.id).style.display = 'none'; }
                } else {
                    e.pos = e.path[idx + 1];
                }
            }
        }
        if(this.monitorOpen) this.switchCam(this.currentCam);
    }

    jumpscare(char) {
        this.active = false;
        const js = document.getElementById('jumpscare');
        js.style.display = 'flex';
        js.classList.add('scare-active');
        document.getElementById('scare-icon').innerText = char;
        setTimeout(() => location.reload(), 2000);
    }
}
const game = new FNAFGame();
</script>
</body>
</html>

