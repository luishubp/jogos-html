<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>FNAF Remastered - Ultimate Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        :root { --primary-color: #88ff88; --danger: #ff0000; }
        body { margin: 0; background: #000; color: #fff; font-family: 'VT323', monospace; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        
        #game-container { position: relative; width: 100vw; height: 56.25vw; max-width: 1280px; max-height: 720px; border: 2px solid #333; overflow: hidden; background: #050505; }

        /* --- TELAS DE MENU --- */
        .screen { position: absolute; inset: 0; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 3000; background: #000; }
        .active-screen { display: flex; }
        h1 { font-size: 80px; margin: 0; color: var(--danger); text-shadow: 4px 4px #200; }
        .menu-btn { background: none; border: 1px solid #fff; color: #fff; padding: 10px 40px; font-family: 'VT323'; font-size: 30px; cursor: pointer; margin-top: 20px; }
        .menu-btn:hover { background: #fff; color: #000; }
        
        .cn-row { display: flex; gap: 40px; margin-bottom: 30px; }
        .cn-char { text-align: center; }
        .cn-char div { font-size: 80px; }
        .cn-input { width: 70px; background: #222; border: 1px solid var(--primary-color); color: var(--primary-color); font-family: 'VT323'; font-size: 35px; text-align: center; }

        /* --- ESCRIT√ìRIO E LUZES --- */
        #office { width: 100%; height: 100%; position: relative; background: #111; }
        .physical-door { position: absolute; top: -100%; width: 12%; height: 100%; background: #222; border: 2px solid #000; transition: top 0.2s; z-index: 40; }
        .door-left { left: 8%; } .door-right { right: 8%; }
        .door-closed { top: 0% !important; }

        .office-light { position: absolute; width: 35%; height: 100%; opacity: 0; pointer-events: none; z-index: 30; }
        #light-L { left: 0; background: radial-gradient(circle at 0% 50%, rgba(255, 255, 200, 0.25), transparent); }
        #light-R { right: 0; background: radial-gradient(circle at 100% 50%, rgba(255, 255, 200, 0.25), transparent); }

        .anim-door { position: absolute; top: 35%; font-size: 110px; z-index: 25; display: none; filter: brightness(0); transition: filter 0.05s; }
        #bonnie-door { left: 5%; } #chica-door { right: 5%; }

        /* --- MONITOR E EST√ÅTICA --- */
        #camera-tablet { position: absolute; inset: 0; background: #000; display: none; z-index: 500; padding: 20px; }
        #cam-display { width: 100%; height: 80%; background: #050505; border: 2px solid #333; position: relative; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        
        .static-overlay { position: absolute; inset: 0; background: url('https://media.giphy.com/media/oEI9uWUuejgRTpFDkA/giphy.gif'); background-size: cover; opacity: 0; pointer-events: none; z-index: 10; }
        .static-active { opacity: 0.25; }

        #enemy-visual { font-size: 150px; filter: brightness(0.2) sepia(1) hue-rotate(80deg) blur(2px); display: none; z-index: 5; }

        #map-area { position: absolute; bottom: 20px; right: 20px; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; z-index: 20; }
        .cam-btn { background: rgba(0,40,0,0.6); border: 1px solid var(--primary-color); color: #fff; cursor: pointer; padding: 8px; font-family: 'VT323'; font-size: 18px; }
        .cam-btn.active { background: var(--primary-color); color: #000; }

        /* --- HUD --- */
        .ui { position: absolute; z-index: 1000; padding: 15px; font-size: 32px; pointer-events: none; }
        .ui-pwr { bottom: 0; left: 0; color: var(--primary-color); }
        .ui-clk { top: 0; right: 0; }
        #mon-trig { position: absolute; bottom: 0; left: 30%; width: 40%; height: 45px; background: rgba(255,255,255,0.15); border: 2px solid #fff; z-index: 1000; cursor: pointer; text-align: center; line-height: 45px; font-size: 24px; }

        /* --- JUMPSCARE --- */
        #jumpscare { position: absolute; inset: 0; z-index: 5000; display: none; background: #000; flex-direction: column; justify-content: center; align-items: center; }
        @keyframes glitch { 0% { background: #400; transform: scale(1.1) translate(5px); } 50% { background: #000; transform: scale(0.9) translate(-5px); } 100% { background: #200; transform: scale(1.2); } }
        .scare-active { animation: glitch 0.04s infinite; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="screen-menu" class="screen active-screen">
        <h1>FNAF REMASTERED</h1>
        <button class="menu-btn" onclick="showScreen('screen-cn')">CUSTOM NIGHT</button>
        <button class="menu-btn" onclick="startGame(5, 5)">START GAME (Normal)</button>
    </div>

    <div id="screen-cn" class="screen">
        <h1>CUSTOM NIGHT</h1>
        <div class="cn-row">
            <div class="cn-char"><div>üê∞</div><p>BONNIE</p><input type="number" id="lv-bonnie" class="cn-input" value="0" min="0" max="20"></div>
            <div class="cn-char"><div>üê•</div><p>CHICA</p><input type="number" id="lv-chica" class="cn-input" value="0" min="0" max="20"></div>
        </div>
        <button class="menu-btn" onclick="startCustomGame()">START 20/20/20/20</button>
    </div>

    <div id="office-scene" style="width:100%; height:100%; display:none;">
        <div id="office">
            <div id="v-door-L" class="physical-door door-left"></div>
            <div id="v-door-R" class="physical-door door-right"></div>
            
            <div id="bonnie-door" class="anim-door">üê∞</div>
            <div id="chica-door" class="anim-door">üê•</div>

            <div id="light-L" class="office-light"></div>
            <div id="light-R" class="office-light"></div>

            <div class="control-panel" style="left:0; border-radius: 0 5px 5px 0;">
                <div id="b-L-d" class="btn" style="background:#400; color:white; border:2px solid #000; margin-bottom:10px; cursor:pointer;" onclick="game.toggleDoor('left')">DOOR</div>
                <div id="b-L-l" class="btn" style="background:#440; color:white; border:2px solid #000; cursor:pointer;" onmousedown="game.setLight('left',true)" onmouseup="game.setLight('left',false)">LIGHT</div>
            </div>

            <div class="control-panel" style="right:0; border-radius: 5px 0 0 5px;">
                <div id="b-R-d" class="btn" style="background:#400; color:white; border:2px solid #000; margin-bottom:10px; cursor:pointer;" onclick="game.toggleDoor('right')">DOOR</div>
                <div id="b-R-l" class="btn" style="background:#440; color:white; border:2px solid #000; cursor:pointer;" onmousedown="game.setLight('right',true)" onmouseup="game.setLight('right',false)">LIGHT</div>
            </div>

            <div id="camera-tablet">
                <div id="cam-display">
                    <div id="static-effect" class="static-overlay"></div>
                    <div id="enemy-visual"></div>
                    <div id="cam-lbl" style="position:absolute; top:20px; left:20px; font-size:40px; color:var(--primary-color); z-index:20;">CAM 1A</div>
                </div>
                <div id="map-area">
                    <button id="b1A" class="cam-btn" onclick="game.switchCam('1A')">1A</button>
                    <button id="b2A" class="cam-btn" onclick="game.switchCam('2A')">2A</button>
                    <button id="b1B" class="cam-btn" onclick="game.switchCam('1B')">1B</button>
                    <button id="b4B" class="cam-btn" onclick="game.switchCam('4B')">4B</button>
                </div>
            </div>

            <div class="ui ui-pwr">POWER: <span id="pwr">100</span>%</div>
            <div class="ui ui-clk" id="clk">12 AM</div>
            <div id="mon-trig" onclick="game.toggleMon()">ABRIR MONITOR</div>
        </div>
    </div>

    <div id="jumpscare">
        <div id="scare-icon" style="font-size:300px;"></div>
        <h2 style="font-size:50px; color:white;">GAME OVER</h2>
    </div>
</div>

<script>
function showScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
    if(id !== 'none') document.getElementById(id).classList.add('active-screen');
}

function startCustomGame() {
    const bLv = parseInt(document.getElementById('lv-bonnie').value);
    const cLv = parseInt(document.getElementById('lv-chica').value);
    startGame(bLv, cLv);
}

function startGame(bLv, cLv) {
    showScreen('none');
    document.getElementById('office-scene').style.display = 'block';
    game.start(bLv, cLv);
}

class FNAFGame {
    constructor() {
        this.active = false;
        this.power = 100;
        this.hour = 0;
        this.monitorOpen = false;
        this.doors = { left: false, right: false };
        this.currentCam = '1A';
        // ROTA TROCADA: Bonnie na esquerda (1A/2A), Chica na direita (1B/4B)
        this.enemies = {
            'Bonnie': { pos: '1A', side: 'left', path: ['1A', '2A', 'DoorL'], char: 'üê∞', id: 'bonnie-door' },
            'Chica': { pos: '1B', side: 'right', path: ['1B', '4B', 'DoorR'], char: 'üê•', id: 'chica-door' }
        };
    }

    start(bLv, cLv) {
        this.active = true;
        this.enemies['Bonnie'].lv = bLv;
        this.enemies['Chica'].lv = cLv;
        setInterval(() => this.tick(), 1000);
        setInterval(() => this.moveAI(), 4500);
        setInterval(() => this.updateClock(), 60000);
    }

    tick() {
        if(!this.active) return;
        let drain = 0.15;
        if(this.doors.left) drain += 0.35;
        if(this.doors.right) drain += 0.35;
        if(this.monitorOpen) drain += 0.3;
        this.power -= drain;
        document.getElementById('pwr').innerText = Math.max(0, Math.floor(this.power));
        if(this.power <= 0) location.reload();
    }

    updateClock() {
        if(!this.active) return;
        this.hour++;
        document.getElementById('clk').innerText = this.hour + " AM";
        if(this.hour >= 6) { alert("6 AM - VOC√ä SOBREVIVEU!"); location.reload(); }
    }

    toggleDoor(side) {
        this.doors[side] = !this.doors[side];
        document.getElementById(`v-door-${side==='left'?'L':'R'}`).classList.toggle('door-closed', this.doors[side]);
        document.getElementById(`b-${side==='left'?'L':'R'}-d`).style.background = this.doors[side] ? '#f00' : '#400';
    }

    setLight(side, state) {
        document.getElementById(`light-${side==='left'?'L':'R'}`).style.opacity = state ? 1 : 0;
        document.getElementById(`b-${side==='left'?'L':'R'}-l`).style.background = state ? '#ff0' : '#440';
        document.getElementById(`b-${side==='left'?'L':'R'}-l`).style.color = state ? '#000' : '#fff';
        
        const enemy = side === 'left' ? this.enemies['Bonnie'] : this.enemies['Chica'];
        const el = document.getElementById(enemy.id);
        if(enemy.pos === (side === 'left' ? 'DoorL' : 'DoorR')) {
            el.style.display = 'block';
            el.style.filter = state ? 'brightness(1)' : 'brightness(0)';
        }
    }

    toggleMon() {
        this.monitorOpen = !this.monitorOpen;
        document.getElementById('camera-tablet').style.display = this.monitorOpen ? 'block' : 'none';
        document.getElementById('mon-trig').innerText = this.monitorOpen ? "FECHAR MONITOR" : "ABRIR MONITOR";
        if(this.monitorOpen) this.switchCam(this.currentCam);
    }

    triggerStatic(ms) {
        const s = document.getElementById('static-effect');
        s.classList.add('static-active');
        setTimeout(() => s.classList.remove('static-active'), ms);
    }

    switchCam(cam) {
        this.currentCam = cam;
        this.triggerStatic(250);
        document.getElementById('cam-lbl').innerText = "CAM " + cam;
        document.querySelectorAll('.cam-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('b' + cam).classList.add('active');

        const visual = document.getElementById('enemy-visual');
        visual.style.display = 'none';
        for(let n in this.enemies) {
            if(this.enemies[n].pos === cam) {
                visual.style.display = 'block';
                visual.innerText = this.enemies[n].char;
                visual.style.transform = `translate(${Math.random()*60-30}px, ${Math.random()*40-20}px)`;
            }
        }
    }

    moveAI() {
        let changed = false;
        for(let n in this.enemies) {
            let e = this.enemies[n];
            if(Math.random() * 20 < e.lv) {
                let idx = e.path.indexOf(e.pos);
                if(idx === e.path.length - 1) {
                    if(!this.doors[e.side]) this.jumpscare(e.char);
                    else { e.pos = e.path[0]; changed = true; }
                } else {
                    e.pos = e.path[idx + 1];
                    changed = true;
                }
            }
        }
        if(changed && this.monitorOpen) {
            this.triggerStatic(500);
            this.switchCam(this.currentCam);
        }
    }

    jumpscare(char) {
        this.active = false;
        const js = document.getElementById('jumpscare');
        js.style.display = 'flex';
        js.classList.add('scare-active');
        document.getElementById('scare-icon').innerText = char;
        setTimeout(() => location.reload(), 2500);
    }
}
const game = new FNAFGame();
</script>
</body>
</html>

