<!DOCTYPE html>
<html>
<head>
    <title>Alien Space Wars - Prototipo Grok</title>
    <style>body { margin: 0; background: #000; } canvas { display: block; }</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = 800;
canvas.height = 600;

let player = { x: 50, y: 300, w: 40, h: 30, speed: 5, hp: 100 };
let bullets = [];
let aliens = [];
let particles = [];
let score = 0;
let keys = {};

document.addEventListener('keydown', e => keys[e.code] = true);
document.addEventListener('keyup', e => keys[e.code] = false);

function shoot() {
    bullets.push({ x: player.x + player.w, y: player.y + player.h/2 - 2, w: 10, h: 4, speed: 8 });
}
setInterval(shoot, 200); // Auto-fire pra testar

function update() {
    // Player
    if (keys['ArrowUp'] && player.y > 0) player.y -= player.speed;
    if (keys['ArrowDown'] && player.y < canvas.height - player.h) player.y += player.speed;
    if (keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
    if (keys['ArrowRight'] && player.x < canvas.width - player.w) player.x += player.speed;
    if (keys['Space']) shoot();

    // Bullets
    bullets = bullets.filter(b => {
        b.x += b.speed;
        return b.x < canvas.width;
    });

    // Aliens spawn
    if (Math.random() < 0.02) {
        aliens.push({ x: canvas.width, y: Math.random() * (canvas.height - 40), w: 40, h: 30, speed: 2 + Math.random() * 2 });
    }
    aliens.forEach(a => {
        a.x -= a.speed;
        // Colisão player-alien
        if (a.x < player.x + player.w && a.x + a.w > player.x && a.y < player.y + player.h && a.y + a.h > player.y) {
            player.hp -= 10;
            a.x = -100; // Remove
        }
    });
    aliens = aliens.filter(a => a.x > -50);

    // Colisão bullets-aliens
    bullets.forEach((b, bi) => {
        aliens.forEach((a, ai) => {
            if (b.x < a.x + a.w && b.x + b.w > a.x && b.y < a.y + a.h && b.y + b.h > a.y) {
                score += 10;
                createParticles(a.x + a.w/2, a.y + a.h/2);
                bullets.splice(bi, 1);
                aliens.splice(ai, 1);
            }
        });
    });

    // Particles explosão
    particles = particles.filter(p => {
        p.x += p.vx;
        p.y += p.vy;
        p.life--;
        return p.life > 0;
    });
}

function createParticles(x, y) {
    for (let i = 0; i < 10; i++) {
        particles.push({
            x, y,
            vx: (Math.random() - 0.5) * 10,
            vy: (Math.random() - 0.5) * 10,
            life: 20
        });
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Estrelas bg
    ctx.fillStyle = '#fff';
    for (let i = 0; i < 100; i++) {
        ctx.fillRect(Math.random() * canvas.width, Math.random() * canvas.height, 1, 1);
    }

    // Player (nave cyborg)
    ctx.fillStyle = '#0f0';
    ctx.fillRect(player.x, player.y, player.w, player.h);
    ctx.fillStyle = '#fff';
    ctx.fillRect(player.x + 5, player.y + 5, 10, 5); // Cockpit

    // Bullets
    ctx.fillStyle = '#ff0';
    bullets.forEach(b => ctx.fillRect(b.x, b.y, b.w, b.h));

    // Aliens (verdes xenomorfos)
    ctx.fillStyle = '#f00';
    aliens.forEach(a => {
        ctx.fillRect(a.x, a.y, a.w, a.h);
        ctx.fillStyle = '#fff';
        ctx.fillRect(a.x + 10, a.y + 5, 5, 5); // Olho
        ctx.fillStyle = '#f00';
    });

    // Particles
    particles.forEach(p => {
        ctx.fillStyle = `rgba(255, ${Math.floor(255 * p.life / 20)}, 0, ${p.life / 20})`;
        ctx.fillRect(p.x, p.y, 3, 3);
    });

    // UI
    ctx.fillStyle = '#fff';
    ctx.font = '20px Arial';
    ctx.fillText(`Score: ${score}`, 10, 30);
    ctx.fillText(`HP: ${player.hp}`, 10, 60);
    if (player.hp <= 0) {
        ctx.fillStyle = '#f00';
        ctx.fillText('GAME OVER! Reload pra jogar de novo', 200, 300);
    }
}

function loop() {
    update();
    draw();
    requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
